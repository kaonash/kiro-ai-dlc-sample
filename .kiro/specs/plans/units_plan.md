# ユニット更新計画

## 概要
ユーザーストーリーファイルの差分分析に基づき、魔力システムの追加により既存ユニットの更新が必要です。

## 差分分析結果
以下の主要な変更が確認されました：
1. **魔力システムの追加**: 新しいストーリー2.2「魔力システムによるリソース管理」が追加
2. **カードプレイロジックの更新**: ストーリー2.3で魔力コストと魔力消費の概念が追加
3. **タワー特性の更新**: ストーリー3.1で魔力コストの概念が追加
4. **ストーリー番号の変更**: 2.2の追加により2.3→2.4にシフト

## 実行計画

### ステップ1: 既存ユニット構造の確認
- [x] 既存の5つのユニットフォルダの内容を確認
- [x] 各ユニットのunit.mdファイルの現在の内容を把握
- [x] 魔力システム関連の変更が必要なユニットを特定

### ステップ2: ユニット分割戦略の再検討
- [x] 魔力システムの追加により、ユニット間の依存関係を再評価
- [x] 魔力システムを独立したユニットとして作成することを確認
- [x] カード・戦略管理ユニットとの魔力システム連携を検討

### ステップ3: 各ユニットの更新内容確認
- [x] **新規ユニット**: 魔力システム管理ユニット（ストーリー2.2）を作成
- [x] **カード・戦略管理ユニット**: ストーリー番号変更（2.2→2.3, 2.3→2.4）と魔力コスト関連の更新が必要
- [x] **タワー・戦闘システムユニット**: 魔力コスト関連の更新（ストーリー3.1）が必要
- [x] **敵・チャレンジシステムユニット**: 変更の影響なし
- [x] **UI・フィードバックシステムユニット**: 魔力表示関連の更新が必要

### ステップ4: ユニット更新の実行
- [x] 魔力システム管理ユニットを新規作成
- [x] カード・戦略管理ユニットを更新
- [x] タワー・戦闘システムユニットを更新
- [x] UI・フィードバックシステムユニットを更新
- [x] ユニット間の依存関係と整合性を確保

### ステップ5: 最終確認と承認
- [x] 更新されたユニット構造の妥当性を確認
- [x] ユーザーからの承認を取得
- [x] 各ユニットフォルダにcompleted.txtファイルを作成

## 確認事項
以下の点について確認が必要です：

1. **魔力システムの配置**: 魔力システム（ストーリー2.2）をゲームセッション管理ユニットに配置するか、独立したユニットとするか？

2. **ユニット数の変更**: 現在5つのユニットが存在するが、この構造を維持するか、魔力システムにより再編成するか？

3. **既存内容の保持**: 既存のunit.mdファイルに有用な情報がある場合、それを保持して差分のみ更新するか？

## リスク
- 既存ユニット構造との整合性
- 魔力システムによる新しい依存関係の管理
- ストーリー番号変更による参照の更新