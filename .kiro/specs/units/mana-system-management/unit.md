# 魔力システム管理ユニット

## ユニット概要

**責任**: 魔力生成、魔力消費、魔力状態管理  
**技術的境界**: 魔力リソース管理、時間ベース生成、コスト検証  
**外部依存**: ゲームセッション管理（ユニット1）

## 含まれるユーザーストーリー

### ストーリー2.2: 魔力システムによるリソース管理
**優先度**: 高

**ユーザーストーリー**: カジュアルゲーマーとして、時間経過で蓄積される魔力を使ってカードをプレイしたい。そうすることで、リソース管理の戦略的判断を楽しみながら、タイミングを考慮した戦術的なプレイができる。

**受入基準**:
1. ゲーム開始時に、プレイヤーは初期魔力（例：10ポイント）を持ってスタートしなければならない
2. 時間経過とともに、システムは1秒ごとに魔力を1ポイント増加させなければならない
3. 魔力の現在値と最大値（99ポイント）が画面上に明確に表示されなければならない
4. 各カードには魔力コスト（3-30ポイント）が設定され、カード上に表示されなければならない

**要件トレーサビリティ**: 要件3

## ユニット間インターフェース

### 提供するサービス
- 魔力生成・蓄積
- 魔力消費処理
- 魔力残量確認
- 魔力コスト検証
- 魔力状態情報提供

### 依存するサービス
- ゲームセッション管理（ユニット1）: ゲーム時間情報、ゲーム状態
- カード・戦略管理（ユニット2）: 魔力消費要求
- UI・フィードバックシステム（ユニット5）: 魔力状態表示

## 実装上の考慮事項

- 1秒間隔での正確な魔力生成タイミング
- 魔力上限（99ポイント）の制御
- 魔力消費の原子性保証
- 魔力不足時の適切なエラーハンドリング
- 魔力状態の一貫性保証
- パフォーマンス最適化（頻繁な更新処理）
- ゲーム一時停止時の魔力生成制御