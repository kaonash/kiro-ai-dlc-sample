# カード・戦略管理ユニット

## ユニット概要

**責任**: カード配布、手札管理、カードプレイロジック  
**技術的境界**: カードデータ管理、ランダム生成、プレイ検証、魔力コスト管理  
**外部依存**: タワー配置システム（ユニット3）、魔力システム（ユニット6）

## 含まれるユーザーストーリー

### ストーリー2.1: ランダムカード配布
**優先度**: 高

**ユーザーストーリー**: カジュアルゲーマーとして、毎回異なる8枚のカードでゲームを開始したい。そうすることで、毎回新しい戦略的チャレンジを楽しみ、ゲームのリプレイ性を体験できる。

**受入基準**:
1. 新しいゲームが開始されるとき、システムは30種類以上のカードプールから8枚をランダムに選択しなければならない
2. 選択された8枚のカードに重複があってはならない
3. カードは手札エリアに視覚的に魅力的な形で表示されなければならない
4. 各カードには魔力コスト、タワータイプ、特殊能力が明確に表示されなければならない

**要件トレーサビリティ**: 要件2, 要件7

### ストーリー2.3: 戦略的カードプレイ
**優先度**: 高

**ユーザーストーリー**: カジュアルゲーマーとして、十分な魔力がある時にカードを戦場の適切な位置にドラッグ&ドロップで配置したい。そうすることで、直感的な操作で戦略的な防御ラインを構築できる。

**受入基準**:
1. プレイヤーがカードを戦場にドラッグするとき、システムは配置可能な位置をハイライト表示しなければならない
2. 魔力が不足している場合、システムはカードを半透明表示し、ドラッグを無効化しなければならない
3. 十分な魔力があり有効な位置にカードをドロップするとき、システムは魔力コストを消費し、対応するタワーを即座に配置し、カードを手札から除去しなければならない
4. 無効な位置にドロップしようとするとき、システムは視覚的フィードバックでエラーを示し、カードを手札に戻さなければならない
5. タワー配置時に、システムは配置アニメーション、魔力消費エフェクト、音響エフェクトを再生しなければならない

**要件トレーサビリティ**: 要件3

### ストーリー2.4: 多様なカードタイプの発見
**優先度**: 中

**ユーザーストーリー**: カジュアルゲーマーとして、プレイを重ねることで新しいカードタイプとその戦略的価値を発見したい。そうすることで、長期的な学習と成長の楽しさを体験できる。

**受入基準**:
1. システムは最低30種類の異なるカードタイプを提供しなければならない
2. 各カードタイプは独自の特性、魔力コスト（3-30ポイント）、戦略的価値を持たなければならない
3. 新しいカードに初めて遭遇するとき、システムは詳細な説明とヒントを表示しなければならない
4. カードライブラリ機能で、プレイヤーは遭遇したすべてのカードを確認できなければならない

**要件トレーサビリティ**: 要件7

## ユニット間インターフェース

### 提供するサービス
- カードプール管理
- ランダムカード選択
- 手札状態管理
- カードプレイ検証
- カードライブラリ管理

### 依存するサービス
- タワー配置システム（ユニット3）: カードからタワーへの変換
- 魔力システム管理（ユニット6）: 魔力残量確認、魔力消費処理
- UI・フィードバックシステム（ユニット5）: ドラッグ&ドロップ操作、視覚表示

## 実装上の考慮事項

- カードデータの効率的な管理とロード
- ランダム生成アルゴリズムの品質
- ドラッグ&ドロップ操作の応答性
- カードとタワーの仕様整合性
- カードライブラリの永続化