# 要件定義書

## 概要

この文書は、戦略的なカードプレイと従来のタワーディフェンスメカニクスを組み合わせた2Dタワーディフェンスカードゲームの要件を定義します。ゲームは3分間の短いセッションが特徴で、プレイヤーはランダムに配られたカードを使用して敵の波に対する防御ユニットを配置します。各カードは独特の特性を持つユニークなタワーまたは防御ユニットを表し、タイミングと配置の決定を通じて戦略的な深さを生み出します。

## 要件

### 要件1

**ユーザーストーリー:** プレイヤーとして、約3分間続く新しいゲームセッションを開始したい。そうすることで、スケジュールに合う短いゲームセッションを楽しむことができる。

#### 受入基準

1. プレイヤーが新しいゲームを開始するとき、システムは3分タイマー付きのゲームセッションを初期化しなければならない
2. ゲームタイマーがゼロに達するとき、システムはゲームを終了し結果を表示しなければならない
3. ゲームセッションが終了するとき、システムはパフォーマンスに基づいてプレイヤーのスコアを計算し表示しなければならない

### 要件2

**ユーザーストーリー:** プレイヤーとして、各ゲームの開始時に8枚のランダムなカードを受け取りたい。そうすることで、各セッションがユニークな戦略的チャレンジとリプレイ性を提供できる。

#### 受入基準

1. 新しいゲームが開始されるとき、システムは利用可能なカードプールから8枚のカードをランダムに選択しなければならない
2. カードが配られるとき、システムは単一のゲームセッション内で重複カードがないことを保証しなければならない
3. カードが表示されるとき、システムはコスト、能力、特性を含むカードの詳細を表示しなければならない

### 要件3

**ユーザーストーリー:** プレイヤーとして、戦略的にカードをプレイして戦場にタワーを配置したい。そうすることで、迫り来る敵の波から防御できる。

#### 受入基準

1. プレイヤーがカードを選択するとき、システムは戦場の有効な位置に対応するタワーの配置を許可しなければならない
2. タワーが配置されるとき、システムはプレイヤーの手札からカードを取り除かなければならない
3. タワーが配備されるとき、システムはカード仕様に従ってタワーの防御能力を有効化しなければならない
4. プレイヤーが無効な位置にタワーを配置しようとする場合、システムは配置を防止しエラーメッセージを表示しなければならない

### 要件4

**ユーザーストーリー:** プレイヤーとして、タワーが多様な特性とトレードオフを持つことを望む。そうすることで、どのカードをいつプレイするかについて戦略的な決定を行わなければならない。

#### 受入基準

1. タワーが作成されるとき、システムはユニークな特性を持つ異なるタワータイプを実装しなければならない
2. 「強力だが遅い」タワーが配備されるとき、システムは運用可能になる前により長い有効化時間を要求しなければならない
3. 「高ダメージだが脆弱」タワーが配備されるとき、システムは近距離の敵に対して脆弱にしなければならない
4. タワーが敵と交戦するとき、システムは各タワータイプの特定の強みと弱みを適用しなければならない

### 要件5

**ユーザーストーリー:** プレイヤーとして、防御戦略に挑戦する敵の波に直面したい。そうすることで、ゲームが魅力的な戦術的ゲームプレイを提供できる。

#### 受入基準

1. ゲームセッションが開始されるとき、システムは所定の間隔で敵の波を生成しなければならない
2. 敵が生成されるとき、システムはプレイヤーの基地に向かって事前定義されたパスに従わせなければならない
3. 敵がプレイヤーの基地に到達するとき、システムはプレイヤーの体力/ライフを減少させなければならない
4. プレイヤーの体力がゼロに達するとき、システムは敗北としてゲームを終了しなければならない

### 要件6

**ユーザーストーリー:** プレイヤーとして、タワーが射程内の敵を自動的に攻撃することを望む。そうすることで、マイクロマネジメントではなく戦略的なカードプレイに集中できる。

#### 受入基準

1. 敵がタワーの射程に入るとき、システムは自動的に敵をターゲットし攻撃しなければならない
2. 複数の敵が射程内にいるとき、システムはタワーのターゲット優先度（最も近い、最も強いなど）を適用しなければならない
3. タワーが敵を倒すとき、システムはプレイヤーにポイントを与えなければならない
4. タワーの攻撃が敵に命中するとき、システムはタワーの仕様に従ってダメージを適用しなければならない

### 要件7

**ユーザーストーリー:** プレイヤーとして、数十種類の異なるカードタイプにアクセスしたい。そうすることで、複数のプレイセッションを通じて新しい戦略と組み合わせを発見できる。

#### 受入基準

1. ゲームが初期化されるとき、システムは少なくとも30種類の異なるカードタイプのプールを提供しなければならない
2. カードが設計されるとき、システムは各カードがユニークな特性と戦略的価値を持つことを保証しなければならない
3. プレイヤーが複数のゲームをプレイするとき、システムは異なるカードの組み合わせを通じてバラエティを提供しなければならない
4. 新しいカードに遭遇するとき、システムはその能力と特性を明確に表示しなければならない

### 要件8

**ユーザーストーリー:** プレイヤーとして、自分のアクションに対する即座の視覚的・音響的フィードバックを望む。そうすることで、ゲームが反応的で魅力的に感じられる。

#### 受入基準

1. プレイヤーがタワーを配置するとき、システムは配置の即座の視覚的確認を提供しなければならない
2. タワーが敵を攻撃するとき、システムは攻撃アニメーションとエフェクトを表示しなければならない
3. 敵が倒されるとき、システムは破壊エフェクトと報酬フィードバックを表示しなければならない
4. 重要なゲームイベントが発生するとき、システムは適切な音響キューを提供しなければならない

### 要件9

**ユーザーストーリー:** プレイヤーとして、現在のゲーム状態を明確に見たい。そうすることで、情報に基づいた戦略的決定を行うことができる。

#### 受入基準

1. プレイ中、システムは残り時間、現在の体力/ライフ、スコアを表示しなければならない
2. カードが利用可能なとき、システムはカードの詳細と共にプレイヤーの現在の手札を表示しなければならない
3. 敵がアクティブなとき、システムは敵の位置、体力、移動を明確に表示しなければならない
4. タワーが配置されるとき、システムはタワーの状態、射程、現在のターゲットを表示しなければならない
